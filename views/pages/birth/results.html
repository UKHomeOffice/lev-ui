{% extends "results-template.njk" %}

{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "hmpo-submit/macro.njk" import hmpoSubmit %}

{% set hmpoPageKey = "birth.resultsPage" %}
{% set govukServiceNameKey = translate("pages.birth.serviceName") %}
{% set govukServiceUrl = "/birth" %}

{% set hmpoTitle -%}
    {{- searchResults.length }} records found for {{ searchTerms.forenames }} {{ searchTerms.surname }} {{ searchTerms.dob | date("DD/MM/YYYY")}}
{%- endset %}

{% block mainContent %}
    {{ super() }}

    {% set rowsArray = [] %}
    {% for result in searchResults %}
        {% set rowsArray = (rowsArray.push([
            {
                html: "<a href=\"#\">" + result.forenames + " " + result.surname + "</a>",
                colspan: 2
            }
        ]), rowsArray) %}
        {% set rowsArray = (rowsArray.push([
            {
                text: "Place of birth"
            },
            {
                text: result.placeOfBirth
            }
        ]), rowsArray) %}
        {% set rowsArray = (rowsArray.push([
            {
                text: "Mother"
            },
            {
                text: result.mother
            }
        ]), rowsArray) %}
        {% set rowsArray = (rowsArray.push([
            {
                text: "Father"
            },
            {
                text: result.father
            }
        ]), rowsArray) %}
    {% endfor %}

    {{ govukTable({
        firstCellIsHeader: true,
        rows: rowsArray
    }) }}

    {{ hmpoSubmit(ctx, {key: "newSearch", href: "/"}) }}
    {{ hmpoSubmit(ctx, {key: "editSearch", href: "/"}) }}
{% endblock %}
